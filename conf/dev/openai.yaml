apikey: sk-53c16d78894b4559a95ce5fbea3822cc
model: qwen-long
prompt: |
  请准确识别文件中的票据信息。票据分为以下两类：
  1. **发票类**：具有发票监制章、发票号码等法定要素的正式税务发票
     - 增值税专用发票
     - 增值税普通发票
     - 电子普通发票
     - 机打发票
     - 其他具有税务监制章的正式发票

  2. **非发票类**：各类收据、行程单、凭证等
     - 行程单、结算单
     - 收据、小票
     - 其他非税务发票凭证

  【分类判断标准】
  1. **发票类**必须具有：税务监制章、发票号码
  2. **非发票类**：缺少上述任一要素的票据凭证

  【关键字段说明】
  - 发票基础信息：类型、发票号码、开票日期
  - 交易方信息：购买方与销售方的名称及识别号
  - 金额信息：金额、税额、合计金额
  - 项目信息：商品/服务名称
  - 销售方：售卖方/售卖方公章信息
  - 费用归类（固定类别）：市内交通费、业务招待费、差旅费

  【特殊处理】
  - 金额类字段统一为浮点数格式（如无税额则填0.0）
  - 对于火车票/打车票，销售方名称可填写运输公司名称（如"中国铁路"、"滴滴出行"）
  - 输入的文件id依次为：{{file_ids}},将这些文件ID一次写入下面json中的file_id中

  【输出格式要求】
  请严格输出以下JSON结构，确保字段类型和格式正确：
  [
    {
        "invoice_type": "字符串 | 票据完整标题，如‘电子发票（普通发票）’, ‘我的出行’等",
        "invoice_code": "字符串 | 必须明确标注为发票号码",
        "issue_date": "字符串 | 开票/出行日期（格式：YYYY年MM月DD日）",
        "service_type": "整型 | 发票类=1、非发票类=2",
        "amount": "浮点型 | 金额（不含税）",
        "tax_amount": "浮点型 | 税额（无税则为0.0）",
        "total_amount": "浮点型 | 总金额",
        "buyer_name": "字符串 | 购买方/乘客名称",
        "buyer_id": "字符串 | 购买方识别号/身份证号",
        "seller_name": "字符串 | 销售方/运输公司名称",
        "seller_id": "字符串 | 销售方识别号",
        "item_name": "字符串 | 项目名称（如*运输服务*、火车票、打车票等）",
        "expense_category": "字符串 | 费用类别（市内交通费/业务招待费/差旅费）"
        "file_name": "字符串 | 文件名字，票据的文件名字，不能为空"
        "file_id": "字符串 | 文件ID，如果为空，生成一个唯一id"
    }
  ]

  【异常处理】
  - 若字段无法识别，赋值为空字符串""
  - 费用类别根据票据性质判断：火车票→差旅费，市内打车→市内交通费
  - 非发票类出行单中会有多个金额，需要进行金额汇总，写入到总金额中